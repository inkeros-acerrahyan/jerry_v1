GCloud reference
https://cloud.google.com/sdk/gcloud/reference

---------------------------------------------------------------------------------------------------------------------------------
# enable apis
gcloud services enable cloudfunctions.googleapis.com \
cloudbuild.googleapis.com \
cloudscheduler.googleapis.com \
documentai.googleapis.com

# create service account
gcloud iam service-accounts create jerry-v1-sa \
--description="Service account for jerry_v1" \
--display-name="jerry_v1_sa"

# create the function
gcloud functions deploy print_hello \
--runtime python312 \
--trigger-http \
--entry-point hello \
--region=us-central1 \
--no-allow-unauthenticated

# allow the SA to invoke the function
gcloud functions add-invoker-policy-binding print_hello \
--region=us-central1 \
--member=serviceAccount:jerry-v1-sa@ari-dev-463216.iam.gserviceaccount.com

# create the scheduler and attach the SA to it
gcloud scheduler jobs create http hello_scheduler_job \
--schedule "* * * * *" \
--uri https://us-central1-ari-dev-463216.cloudfunctions.net/print_hello \
--http-method=GET \
--oidc-service-account-email=jerry-v1-sa@ari-dev-463216.iam.gserviceaccount.com \
--location=us-central1 \
--time-zone="America/Toronto"
---------------------------------------------------------------------------------------------------------------------------------


# bucket to upload docs for ai to train with
gcloud storage buckets create gs://jerry_v1_training_data

gcloud storage mv /mnt/c/Users/AriCerrahyan/Downloads/order-summary-telus-training gs://jerry_v1_training_data


# ----------------------------------------------------------------------------------------
# need to figure out how to get the AI's service account automatically created
# or manually attach a custom service account to the AI to allow it to use the bucket
# apparently enabling the document AI creates a service account but yeah no clue what happened

gcloud iam service-accounts create jerry-v1-bucket-getter-sa \
--description="Service account for jerry_v1 to upload documents from bucket for training" \
--display-name="jerry_v1_bucket_getter_sa"

gcloud storage buckets add-iam-policy-binding gs://jerry_v1_training_data \
--member=serviceAccount:jerry-v1-bucket-getter-sa@ari-dev-463216.iam.gserviceaccount.com \
--role=roles/storage.objectViewer

gcloud storage buckets add-iam-policy-binding gs://jerry_v1_training_data \
--member="serviceAccount:service-757764650459@gcp-sa-documentai.iam.gserviceaccount.com" \
--role="roles/storage.objectViewer"

# end of service account issue -----------------------------------------------------------

# setup document ai
https://cloud.google.com/document-ai/docs/overview







questions...
- which project is this going to be hosted in?
    . unknown for production, development on any project is fine
- how will the bucket be organized?
    . possible solution
        - pickup, processing, succeeded, failed directories for each stage of file processing
- can i move a trained model from one project to another or even just copy it??? - this is for me to figure out


requirements...
- all business related data required from the pdf files
- a db schema
 . cpms ID
 . order ID
just dump the results into the db as long as the minimum extracted data requirements are met


services required
- bucket
- db
- functions
- scheduler
- document AI



scheduler triggers function to proccess all pdf files in bucket
each file calls document ai to extract the data
move file from a directory to a processed directory
using the link of the file and the data extracted - store it in the db






